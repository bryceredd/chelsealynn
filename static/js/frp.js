// Generated by CoffeeScript 1.10.0
(function() {
  $(document).ready(function() {
    var container, currentImageStream, images, left, leftPositionStream, right;
    images = $('.images img');
    container = $('.allImages');
    right = $('.arrow.right').asEventStream("click").map(1);
    left = $('.arrow.left').asEventStream("click").map(-1);
    currentImageStream = right.merge(left).scan(0, function(current, incoming) {
      return Math.max(0, Math.min(images.size() - 1, current + incoming));
    });
    leftPositionStream = currentImageStream.map(function(x) {
      var image, j, len, ref;
      left = $(window).width() / 2;
      ref = images.slice(0, x);
      for (j = 0, len = ref.length; j < len; j++) {
        image = ref[j];
        left -= $(image).width() + 20;
      }
      return left - (images.eq(x).width() / 2);
    });
    leftPositionStream.assign($('.allImages'), 'css', 'left');
    return images.each(function(i, image) {
      return currentImageStream.map(function(x) {
        return x === i;
      }).assign($(image), 'toggleClass', 'selected');
    });
  });

}).call(this);
